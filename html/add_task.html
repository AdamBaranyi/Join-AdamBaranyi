<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join - Add Task</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="icon" type="image/svg+xml" href="../assets/img/logo.svg">
    <link rel="stylesheet" href="../css/add_task.css">
    <script src="../script.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/add_task.js"></script>
</head>
<body onload="initAddTask()">

    <!-- Include Sidebar -->
    <!-- Include Sidebar -->
    <div w3-include-html="../assets/templates/sidebar.html"></div>
    
    <!-- Include Header -->
    <div w3-include-html="../assets/templates/header.html"></div>
    <!-- Include Mobile Menu -->
    <div w3-include-html="../assets/templates/mobile_menu.html"></div>

    <div class="content-container">
        <h1>Add Task</h1>
        
        <form onsubmit="addTask(event)" novalidate>
            <div class="add-task-layout">
                
                <!-- Left Column -->
                <div class="add-task-column">
                    <div class="form-group">
                        <label>Title<span class="required">*</span></label>
                        <input type="text" id="taskTitle" placeholder="Enter a title" required>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="taskDescription" placeholder="Enter a Description"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Due date<span class="required">*</span></label>
                        <input type="date" id="taskDueDate" required>
                    </div>
                </div>

                <div class="vertical-separator"></div>

                <!-- Right Column -->
                <div class="add-task-column">
                    
                    <div class="form-group">
                        <label>Priority</label>
                        <div class="prio-buttons">
                            <div class="prio-btn urgent" onclick="setPrio('urgent')" id="prio-urgent">
                                Urgent <img src="../assets/img/urgent-priority-board.svg" alt="Urgent">
                            </div>
                            <div class="prio-btn medium selected" onclick="setPrio('medium')" id="prio-medium">
                                Medium <img src="../assets/img/priority_medium.svg" alt="Medium">
                            </div>
                            <div class="prio-btn low" onclick="setPrio('low')" id="prio-low">
                                Low <img src="../assets/img/low-priority-board.svg" alt="Low">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Assigned to</label>
                        <div class="custom-select-container" id="assignedToContainer">
                            <div class="custom-select-trigger" onclick="toggleContactDropdown()">
                                <span>Select contact to assign</span>
                                <svg class="dropdown-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#2A3647" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div id="contactDropdown" class="custom-select-options d-none">
                                <!-- Options rendered by JS -->
                            </div>
                        </div>
                        <div id="selectedContactsContainer" class="selected-contacts"></div>
                    </div>

                    <div class="form-group">
                        <label>Category<span class="required">*</span></label>
                        <select id="taskCategory" required>
                            <option value="" disabled selected>Select task category</option>
                            <option value="User Story">User Story</option>
                            <option value="Technical Task">Technical Task</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Subtasks</label>
                        <div class="subtask-input-container">
                            <input type="text" id="subtaskInput" placeholder="Add new subtask">
                            <button type="button" onclick="addSubtask()" class="subtask-add-btn">+</button>
                        </div>
                        <ul id="subtaskList" class="subtask-list"></ul>
                    </div>

                </div>
            </div>

            <div class="form-actions">
                <span class="required-hint"><span class="required">*</span> This field is required</span>
                <div class="action-buttons">
                    <button type="button" class="btn-light" onclick="clearForm()">
                        Clear 
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.0007 12.0001L17.2435 17.2429M6.75781 17.2429L12.0007 12.0001M12.0007 12.0001L6.75781 6.75726M12.0007 12.0001L17.2435 6.75726" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button type="submit" class="btn-dark">
                        Create Task 
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12L9 16L19 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </form>

    </div>

</body>
</html>
